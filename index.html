<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨ØµÙ…Ø© ØºÙŠØ± - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --primary: #111; --accent: #c5a059; --light: #fdfdfd; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--light); margin: 0; padding: 0; }
        header { background: var(--primary); color: white; padding: 30px 20px; text-align: center; border-bottom: 5px solid var(--accent); }
        
        .main-nav { display: flex; justify-content: center; background: #1a1a1a; padding: 10px; position: sticky; top: 0; z-index: 1000; gap: 8px; flex-wrap: wrap; }
        .nav-link { background: none; border: 1px solid var(--accent); color: var(--accent); padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .nav-link.active { background: var(--accent); color: white; }

        .page-section { max-width: 1200px; margin: 30px auto; padding: 0 20px; display: none; }
        .page-section.active { display: block; }

        .items-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .item-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .item-card img { width: 100%; height: 350px; object-fit: cover; background: #eee; }
        .item-desc { padding: 15px; text-align: center; font-weight: bold; }
        .reaction-bar { display: flex; justify-content: center; gap: 15px; padding: 10px; background: #f9f9f9; }
        .react-btn { border: 1px solid #ddd; background: white; padding: 5px 15px; border-radius: 20px; cursor: pointer; }

        .album-card { background: white; border-radius: 12px; overflow: hidden; cursor: pointer; border-bottom: 3px solid var(--accent); text-align: center; padding-bottom: 10px; }
        .album-card img { width: 100%; height: 220px; object-fit: cover; }

        #adminPanel { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; overflow-y: auto; padding: 20px; box-sizing: border-box; }
        .admin-box { background: #f4f4f4; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        input, select { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .btn-save { background: var(--accent); color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer; width: 100%; font-weight: bold; }
        .admin-toggle { position: fixed; bottom: 20px; left: 20px; background: var(--primary); color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10000; opacity: 0.7; }
    </style>
</head>
<body>

<header>
    <h1 id="siteName">Ø¨ØµÙ…Ø© ØºÙŠØ± Ù„Ù„Ø¯ÙŠÙƒÙˆØ±</h1>
    <p id="siteSub">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…ØªØ·ÙˆØ±</p>
</header>

<div class="main-nav" id="navBar">
    <button class="nav-link active" onclick="showSec('about')">Ù†Ø¨Ø°Ø© Ø¹Ù†Ø§</button>
    <button class="nav-link" onclick="showSec('works')">Ø£Ø¹Ù…Ø§Ù„Ù†Ø§</button>
</div>

<section id="aboutSec" class="page-section active">
    <div style="background:white; padding:40px; border-radius:15px; text-align:center;">
        <h2 style="color:var(--accent)">Ù…Ù† Ù†Ø­Ù†</h2>
        <p id="aboutTxt">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
    </div>
</section>

<section id="worksSec" class="page-section">
    <div id="albumsList" class="items-grid"></div>
</section>

<section id="albumViewer" class="page-section">
    <button onclick="showSec('works')" style="margin-bottom:20px; cursor:pointer;">â¬… Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø£Ø¹Ù…Ø§Ù„</button>
    <div id="albumPhotos" class="items-grid"></div>
</section>

<section id="dynamicSec" class="page-section">
    <h2 id="dynTitle" style="text-align:center; color:var(--accent)"></h2>
    <div id="dynGrid" class="items-grid"></div>
</section>

<div class="admin-toggle" onclick="openAdmin()">âš™ï¸</div>

<div id="adminPanel">
    <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
        <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø°ÙƒÙŠØ©</h2>
        <button onclick="closeAdmin()" style="background:red; color:white; border:none; padding:5px 15px; cursor:pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <div class="admin-box">
        <h3 style="color:var(--accent)">1. Ø¥Ø¶Ø§ÙØ© Ù…Ø¬Ù…ÙˆØ¹Ø© Ù„Ù€ "Ø£Ø¹Ù…Ø§Ù„Ù†Ø§" (5 Ø±ÙˆØ§Ø¨Ø·)</h3>
        <input type="text" id="albName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©">
        <input type="text" id="r1" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© 1 (Ø§Ù„ØºÙ„Ø§Ù)">
        <input type="text" id="r2" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© 2">
        <input type="text" id="r3" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© 3">
        <input type="text" id="r4" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© 4">
        <input type="text" id="r5" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© 5">
        <button class="btn-save" onclick="addAlbum()" style="background:#28a745">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</button>
    </div>

    <div class="admin-box">
        <h3 style="color:var(--accent)">2. Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ù…Ø³ØªÙ‚Ù„ ÙˆØµÙˆØ± (Ø¯ÙˆØ§Ù„ÙŠØ¨ØŒ Ø¥Ù„Ø®)</h3>
        <label>Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø£Ùˆ Ø£Ù†Ø´Ø¦ Ø¬Ø¯ÙŠØ¯Ø§Ù‹:</label>
        <select id="secSelector" onchange="toggleNewSec()">
            <option value="">-- Ø§Ø®ØªØ± Ù‚Ø³Ù…Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ --</option>
            <option value="NEW">+ Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ ØªÙ…Ø§Ù…Ø§Ù‹</option>
        </select>
        <input type="text" id="newSecName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‡Ù†Ø§" style="display:none; border: 2px solid var(--accent);">
        
        <input type="text" id="oneUrl" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
        <input type="text" id="oneDesc" placeholder="ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø©">
        <button class="btn-save" onclick="addSingle()" style="background:#007bff">Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ø§Ù„Ù‚Ø³Ù…</button>
    </div>

    <div class="admin-box">
        <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (Ø­Ø°Ù)</h3>
        <div id="adminList"></div>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyC0hGvWzpb0UxA_RrYn-0PQKyaATXavEGY",
        authDomain: "mydecor-b29bd.firebaseapp.com",
        databaseURL: "https://mydecor-b29bd-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "mydecor-b29bd",
        storageBucket: "mydecor-b29bd.appspot.com",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    let state = { info:{}, albums:{}, singles:[] };

    db.ref('smart_link_system').on('value', snap => {
        if(snap.val()) { state = snap.val(); render(); }
    });

    function render() {
        document.getElementById('siteName').innerText = state.info?.name || "Ø¨ØµÙ…Ø© ØºÙŠØ±";
        document.getElementById('aboutTxt').innerText = state.info?.about || "Ù†Ø¨Ø°Ø© Ø§Ù„Ø´Ø±ÙƒØ© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§";
        
        const nav = document.getElementById('navBar');
        nav.innerHTML = '<button class="nav-link active" onclick="showSec(\'about\')">Ù†Ø¨Ø°Ø© Ø¹Ù†Ø§</button><button class="nav-link" onclick="showSec(\'works\')">Ø£Ø¹Ù…Ø§Ù„Ù†Ø§</button>';
        
        const selector = document.getElementById('secSelector');
        const currentSelected = selector.value;
        selector.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ù‚Ø³Ù…Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ --</option><option value="NEW">+ Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ ØªÙ…Ø§Ù…Ø§Ù‹</option>';

        let cats = [...new Set((state.singles || []).map(s => s.cat))];
        cats.forEach(c => {
            nav.innerHTML += `<button class="nav-link" onclick="showDyn('${c}')">${c}</button>`;
            selector.innerHTML += `<option value="${c}">${c}</option>`;
        });
        selector.value = currentSelected;

        const albList = document.getElementById('albumsList');
        albList.innerHTML = '';
        Object.keys(state.albums || {}).forEach(k => {
            const a = state.albums[k];
            albList.innerHTML += `<div class="album-card" onclick="viewAlb('${k}')"><img src="${a.photos[0]}"><h3>${a.name}</h3><p>${a.photos.length} ØµÙˆØ±</p></div>`;
        });

        const adm = document.getElementById('adminList');
        adm.innerHTML = '';
        (state.singles || []).forEach((s, i) => {
            adm.innerHTML += `<div style="padding:5px; border-bottom:1px solid #ddd;">[${s.cat}] ${s.desc} <button onclick="delS(${i})" style="color:red; background:none; border:none; cursor:pointer;">Ø­Ø°Ù</button></div>`;
        });
        Object.keys(state.albums || {}).forEach(k => {
            adm.innerHTML += `<div style="padding:5px; border-bottom:1px solid #ddd;">[Ø£Ù„Ø¨ÙˆÙ…] ${state.albums[k].name} <button onclick="delA('${k}')" style="color:red; background:none; border:none; cursor:pointer;">Ø­Ø°Ù</button></div>`;
        });
    }

    function toggleNewSec() {
        const val = document.getElementById('secSelector').value;
        document.getElementById('newSecName').style.display = (val === 'NEW') ? 'block' : 'none';
    }

    function addAlbum() {
        const name = document.getElementById('albName').value;
        const photos = [
            document.getElementById('r1').value, document.getElementById('r2').value,
            document.getElementById('r3').value, document.getElementById('r4').value,
            document.getElementById('r5').value
        ].filter(r => r !== "");
        if(!name || photos.length === 0) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        db.ref('smart_link_system/albums').push({ name, photos });
        alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©");
        document.getElementById('albName').value = "";
    }

    function addSingle() {
        const selector = document.getElementById('secSelector');
        let cat = selector.value;
        if(cat === 'NEW') cat = document.getElementById('newSecName').value;
        
        const url = document.getElementById('oneUrl').value;
        const desc = document.getElementById('oneDesc').value;
        
        if(!cat || !url) return alert("Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… ÙˆØ¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©");
        
        const singles = state.singles || [];
        singles.push({ cat, desc, img: url, likes:0, dislikes:0, id: Date.now() });
        db.ref('smart_link_system/singles').set(singles);
        
        alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!");
        document.getElementById('oneUrl').value = "";
        document.getElementById('oneDesc').value = "";
        document.getElementById('newSecName').value = "";
        selector.value = cat; 
        toggleNewSec();
    }

    function showDyn(cat) {
        showSec('dynamic');
        document.getElementById('dynTitle').innerText = cat;
        const grid = document.getElementById('dynGrid');
        grid.innerHTML = '';
        state.singles.filter(s => s.cat === cat).forEach(s => {
            grid.innerHTML += `<div class="item-card"><img src="${s.img}"><div class="item-desc">${s.desc}</div>
            <div class="reaction-bar">
                <button class="react-btn" onclick="react(${s.id},'likes')">ğŸ‘ ${s.likes}</button>
                <button class="react-btn" onclick="react(${s.id},'dislikes')">ğŸ‘ ${s.dislikes}</button>
            </div></div>`;
        });
    }

    function react(id, type) {
        const i = state.singles.findIndex(s => s.id === id);
        state.singles[i][type]++;
        db.ref('smart_link_system/singles').set(state.singles);
    }

    function viewAlb(k) {
        showSec('albumViewer');
        const grid = document.getElementById('albumPhotos');
        grid.innerHTML = '';
        state.albums[k].photos.forEach(p => {
            grid.innerHTML += `<div class="item-card"><img src="${p}"></div>`;
        });
    }

    function showSec(id) {
        document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
        const sec = document.getElementById(id + 'Sec') || document.getElementById(id);
        if(sec) sec.classList.add('active');
    }

    function delS(i) { if(confirm("Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©ØŸ")) { state.singles.splice(i,1); db.ref('smart_link_system/singles').set(state.singles); } }
    function delA(k) { if(confirm("Ø­Ø°Ù Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©ØŸ")) db.ref('smart_link_system/albums/'+k).remove(); }
    function openAdmin() { if(prompt("Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯:")==="1234") document.getElementById('adminPanel').style.display='block'; }
    function closeAdmin() { document.getElementById('adminPanel').style.display='none'; }
</script>
</body>
</html>
