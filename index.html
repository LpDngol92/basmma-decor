<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ø¨ØµÙ…Ø© ØºÙŠØ± | v108 Ø§Ù„Ù…ØµÙ„Ø­Ø©</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;800;900&display=swap');
        :root { --primary: #5c0a0a; --gold: #c5a059; --bg: #0f0f11; --card-bg: #161619; --inner-shadow: inset 4px 4px 8px rgba(0,0,0,0.5), inset -4px -4px 8px rgba(255,255,255,0.03); --outer-shadow: 8px 8px 16px rgba(0,0,0,0.4), -4px -4px 12px rgba(255,255,255,0.02); --green: #2ecc71; --red: #e74c3c; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; -webkit-user-select: none; user-select: none; }
        body { font-family: 'Tajawal', sans-serif; background: var(--bg); color: #e0e0e0; overflow-x: hidden; }
        header { height: 30vh; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; background: #2c1b0e; }
        .header-bg { position: absolute; inset: 0; background-image: linear-gradient(90deg, rgba(0,0,0,0.3) 0%, transparent 5%, transparent 45%, rgba(0,0,0,0.3) 50%, transparent 55%, transparent 95%, rgba(0,0,0,0.3) 100%), url('https://www.toptal.com/designers/subtlepatterns/uploads/wood_pattern.png'); background-size: 60px 100%, auto; filter: brightness(0.6) contrast(1.2); }
        .header-content { position: relative; z-index: 5; text-align: center; }
        .header-content h1 { font-size: 2.2rem; font-weight: 900; color: #fff; text-shadow: 0 4px 10px rgba(0,0,0,0.9); }
        nav { position: sticky; top: 0; z-index: 1000; background: var(--bg); padding: 15px 10px; display: flex; justify-content: center; gap: 12px; overflow-x: auto; scrollbar-width: none; border-bottom: 1px solid rgba(197,160,89,0.1); }
        .nav-btn { padding: 10px 22px; border: none; background: var(--card-bg); color: #888; font-weight: 800; border-radius: 15px; box-shadow: var(--outer-shadow); cursor: pointer; white-space: nowrap; transition: 0.4s; }
        .nav-btn.active { box-shadow: var(--inner-shadow); color: var(--gold); transform: scale(0.95); }
        .sec { width: 92%; max-width: 1400px; margin: 30px auto 100px; display: none; }
        .sec.active { display: block; }
        .grid { display: grid; gap: 20px; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); }
        @media (max-width: 768px) { .grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); } }
        .card { background: var(--card-bg); border-radius: 25px; padding: 10px; box-shadow: var(--outer-shadow); }
        .img-container { position: relative; width: 100%; aspect-ratio: 1/1; cursor: pointer; border-radius: 20px; overflow: hidden; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; }
        .album-card { background: var(--card-bg); height: 100px; display: flex; align-items: center; justify-content: center; border-radius: 20px; box-shadow: var(--outer-shadow); cursor: pointer; border: 1px solid rgba(197,160,89,0.05); }
        .album-card h3 { color: var(--gold); font-weight: 800; font-size: 1.1rem; }
        .home-social { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
        .home-social a { width: 45px; height: 45px; background: var(--card-bg); box-shadow: var(--outer-shadow); border-radius: 50%; display: none; align-items: center; justify-content: center; color: #fff; font-size: 1.2rem; }
        #viewer { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100000; display: none; align-items: center; justify-content: center; }
        #viewer-img { max-width: 95%; max-height: 80vh; border-radius: 15px; }
        #admin-panel { display: none; position: fixed; inset: 0; background: #000; z-index: 999999; padding: 15px; overflow-y: auto; }
        .admin-box { width: 100%; max-width: 900px; margin: 0 auto; background: #111; padding: 20px; border-radius: 15px; border: 1px solid var(--gold); }
    </style>
</head>
<body>

<div id="splash" style="position:fixed; inset:0; background:#0f0f11; z-index:9999999; display:flex; align-items:center; justify-content:center;"><h2 style="color:var(--gold); font-weight:300; letter-spacing:5px;">Ø¨ØµÙ…Ø© ØºÙŠØ±</h2></div>
<div id="viewer" onclick="closeImg()"><img id="viewer-img" src=""></div>

<header><div class="header-bg"></div><div class="header-content"><h1 id="view-title">Ø¨ØµÙ…Ø© ØºÙŠØ±</h1></div></header>
<nav id="navbar"></nav>
<main id="content-area"></main>

<div style="position:fixed; bottom:0; left:0; width:50px; height:50px; z-index:999999;" onclick="checkAccess()"></div>

<div id="admin-panel">
    <div class="admin-box">
        <h2 style="color:var(--gold); margin-bottom:20px;">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© v108</h2>
        <div id="admin-dynamic-content"></div>
        <button onclick="location.reload()" style="width:100%; background:red; color:#fff; padding:12px; border:none; border-radius:8px; margin-top:20px;">Ø®Ø±ÙˆØ¬</button>
    </div>
</div>

<script>
    const config = { databaseURL: "https://mydecor-b29bd-default-rtdb.europe-west1.firebasedatabase.app" };
    firebase.initializeApp(config); const db = firebase.database(); const DB_PATH = 'site_v28';
    let currentData = {}; let currentTab = 'home';
    const DAYS = ["Ø§Ù„Ø£Ø­Ø¯", "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", "Ø§Ù„Ø®Ù…ÙŠØ³", "Ø§Ù„Ø¬Ù…Ø¹Ø©", "Ø§Ù„Ø³Ø¨Øª"];

    db.ref(DB_PATH).on('value', snap => {
        currentData = snap.val() || {}; 
        renderAll();
        setTimeout(() => document.getElementById('splash').style.display='none', 800);
    });

    function renderAll() {
        const d = currentData;
        document.getElementById('view-title').innerText = d.site_name || "Ø¨ØµÙ…Ø© ØºÙŠØ±";
        let navHtml = `<button class="nav-btn ${currentTab==='home'?'active':''}" onclick="go('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>`;
        if(d.pages) Object.keys(d.pages).forEach(id => navHtml += `<button class="nav-btn ${currentTab===id?'active':''}" onclick="go('${id}')">${d.pages[id].title}</button>`);
        navHtml += `<button class="nav-btn ${currentTab==='works'||currentTab.startsWith('alb-')?'active':''}" onclick="go('works')">Ø£Ø¹Ù…Ø§Ù„Ù†Ø§</button>`;
        document.getElementById('navbar').innerHTML = navHtml;

        let contentHtml = `<section id="sec-home" class="sec ${currentTab==='home'?'active':''}">
            <div style="text-align:center;">
                <div style="background:var(--card-bg); padding:35px 20px; border-radius:30px; box-shadow:var(--outer-shadow); max-width:450px; margin:0 auto;">
                   <p style="color:var(--gold); font-weight:800; margin-bottom:15px;">ğŸ•’ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¯ÙˆØ§Ù…</p>
                   <div style="line-height:1.8; margin-bottom:20px;">${getWorkDisplay(d)}</div>
                   <div class="home-social">
                        <a id="btn-wa" href="https://wa.me/${d.whatsapp_num}" target="_blank" style="${d.whatsapp_num?'display:flex':''}"><i class="fab fa-whatsapp"></i></a>
                        <a id="btn-insta" href="${d.insta_url}" target="_blank" style="${d.insta_url?'display:flex':''}"><i class="fab fa-instagram"></i></a>
                        <a id="btn-tiktok" href="${d.tiktok_url}" target="_blank" style="${d.tiktok_url?'display:flex':''}"><i class="fab fa-tiktok"></i></a>
                        <a id="btn-loc" href="${d.location_url}" target="_blank" style="${d.location_url?'display:flex':''}"><i class="fas fa-location-dot"></i></a>
                   </div>
                </div>
            </div>
        </section>`;

        if(d.pages) Object.keys(d.pages).forEach(id => contentHtml += `<section id="sec-${id}" class="sec ${currentTab===id?'active':''}"><div class="grid">${drawImgs(d.pages[id].imgs)}</div></section>`);
        contentHtml += `<section id="sec-works" class="sec ${currentTab==='works'?'active':''}"><div class="grid">${drawAlbums(d.albums)}</div></section>`;
        if(d.albums) Object.keys(d.albums).forEach(id => contentHtml += `<section id="sec-alb-${id}" class="sec ${currentTab==='alb-'+id?'active':''}"><button class="nav-btn" onclick="go('works')" style="margin-bottom:20px;">â† Ø¹ÙˆØ¯Ø©</button><div class="grid">${drawImgs(d.albums[id].imgs)}</div></section>`);
        document.getElementById('content-area').innerHTML = contentHtml;
    }

    function checkAccess() {
        const p = prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:");
        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„ØµØ­ÙŠØ­ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± Ù‚Ø¨Ù„ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©
        db.ref(DB_PATH + '/admin_pass').once('value').then(snap => {
            const serverPass = String(snap.val());
            if(p === serverPass) {
                document.getElementById('admin-panel').style.display='block';
                document.getElementById('admin-dynamic-content').innerHTML = `<p style="color:var(--gold); text-align:center;">ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø± site_v28</p>`;
            } else { alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!"); }
        });
    }

    function drawAlbums(albums) { if(!albums) return ''; return Object.keys(albums).map(id => `<div class="album-card" onclick="go('alb-${id}')"><h3>${albums[id].name}</h3></div>`).join(''); }
    function drawImgs(imgs) { if(!imgs) return '<p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙˆØ±</p>'; return Object.keys(imgs).reverse().map(id => `<div class="card"><div class="img-container" onclick="openImg('${imgs[id].url}')"><img src="${imgs[id].url}" loading="lazy"></div></div>`).join(''); }
    function go(id) { currentTab=id; renderAll(); window.scrollTo(0,0); }
    function openImg(url) { document.getElementById('viewer-img').src = url; document.getElementById('viewer').style.display = 'flex'; }
    function closeImg() { document.getElementById('viewer').style.display = 'none'; }
    function getWorkDisplay(d) { return "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."; } // Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
</script>
</body>
</html>
