<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>بصمة غير - النسخة المحمية</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --gold: #b8860b; --bg: #f4f4f4; }
        body { font-family: sans-serif; background: var(--bg); margin: 0; user-select: none; }
        header { background: white; padding: 30px; text-align: center; border-bottom: 4px solid var(--gold); }
        .nav { display: flex; justify-content: center; gap: 10px; padding: 15px; background: white; }
        .btn { padding: 10px 20px; border: 1px solid #ddd; border-radius: 20px; cursor: pointer; }
        .sec { max-width: 1200px; margin: 30px auto; display: none; text-align: center; }
        .sec.active { display: block; }
        #admin-panel { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 1000; padding: 40px; box-sizing: border-box; }
        .admin-trigger { position: fixed; bottom: 10px; left: 10px; width: 30px; height: 30px; cursor: pointer; opacity: 0.05; }
        input, textarea { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; }
    </style>
</head>
<body oncontextmenu="return false;">

<header><h1 id="d-name">بصمة غير للديكور</h1></header>
<div class="nav">
    <button class="btn" onclick="show('p-about')">الرئيسية</button>
    <button class="btn" onclick="show('p-works')">أعمالنا</button>
</div>

<section id="p-about" class="sec active"><h2>مرحباً بكم في موقعنا</h2></section>
<section id="p-works" class="sec"><h2>معرض الصور يظهر هنا</h2></section>

<div class="admin-trigger" onclick="unlock()"></div>

<div id="admin-panel">
    <h2>لوحة التحكم</h2>
    <input id="in-name" placeholder="اسم الموقع">
    <textarea id="in-about" placeholder="نبذة عنا" rows="5"></textarea>
    <hr>
    <input id="in-pass" type="password" placeholder="تغيير الرقم السري (اختياري)">
    <button class="btn" onclick="saveData()" style="background:var(--gold); color:white; width:100%">حفظ</button>
    <button class="btn" onclick="location.reload()" style="width:100%; margin-top:10px;">خروج</button>
</div>

<script>
    // إعدادات فايربيس الخاصة بك
    const firebaseConfig = {
        apiKey: "AIzaSyC0hGvWzpb0UxA_RrYn-0PQKyaATXavEGY",
        databaseURL: "https://mydecor-b29bd-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "mydecor-b29bd"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // منع فحص العنصر
    setInterval(() => { (function(){debugger}()) }, 1000);

    async function unlock() {
        const userPass = prompt("أدخل الرمز السري:");
        if (!userPass) return;

        try {
            // جلب الرمز من السيرفر (المكان البعيد)
            const snap = await db.ref('server_auth/admin_pass').once('value');
            const realPass = snap.val();

            if (realPass === null) {
                alert("خطأ: لم نجد 'admin_pass' في فايربيس! تأكد من ترتيب الكلمات.");
                return;
            }

            if (userPass.toString() === realPass.toString()) {
                document.getElementById('admin-panel').style.display = 'block';
            } else {
                alert("الرمز غير صحيح!");
            }
        } catch (e) {
            alert("فشل الاتصال: " + e.message);
        }
    }

    function saveData() {
        const newP = document.getElementById('in-pass').value;
        if(newP) db.ref('server_auth/admin_pass').set(newP);
        
        db.ref('public_info').set({
            name: document.getElementById('in-name').value,
            about: document.getElementById('in-about').value
        }).then(() => alert("تم الحفظ"));
    }

    function show(id) {
        document.querySelectorAll('.sec').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }
</script>
</body>
</html>
